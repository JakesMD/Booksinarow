name: staging
description: staging

runs:
  using: "composite"

  steps:
    - name: ğŸ—ï¸ Build Staging App
      shell: bash
      run: melos build_staging

    #Â - name: âš¡ï¸ Setup Supabase
    #Â   if: ${{ github.actor != 'dependabot[bot]' }}
    #   uses: supabase/setup-cli@v1
    #Â   with:
    #Â     version: latest

    # - name: ğŸ—ƒï¸ Push Database Changes
    #   if: ${{ github.actor != 'dependabot[bot]' }}
    #   shell: bash
    #Â   run: |
    #Â     supabase link --project-ref ${{ env.SUPABASE_PROJECT_ID }}
    #Â     supabase db push

    # - name: ğŸ”¥ Setup Firebase Tools
    #Â   shell: bash
    #   run: |
    #     sudo npm install -g firebase-tools
    #     cd app
    #     firebase use ${{ env.FIREBASE_PROJECT_ID }}

    # - name: ğŸš€ Deploy Firebase Hosting
    #   shell: bash
    #   run: |
    #Â     cd app
    #     firebase deploy --only hosting:staging --non-interactive -m "RunID ${{ env.RUN_ID }} Commit SHA ${{ env.SHA }}"

    # - name: ğŸšš Distribute App
    #   shell: bash
    #Â   run: |
    #     cd app
    #     firebase appdistribution:distribute build/app/outputs/flutter-apk/app-staging-release.apk --app ${{ env.FIREBASE_ANDROID_STAGING_APP_ID }} --groups "staging-android" --non-interactive
